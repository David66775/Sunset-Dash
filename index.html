<!DOCTYPE html>
<html>
  <head>
    <meta charset = "Utf-8">
    <title>Sunset Dash</title>
    
    <style>
      * {
        margin: 0px;
        padding: 0px;
        width: 99.9vw;
        height: 99.3vh;
      }
      body {
        background-color: black;
      }
      canvas {
        z-index: 0;
        object-fit: cover;
        background-image: url("https://cdn.pixabay.com/photo/2013/04/04/12/34/mountains-100367_1280.jpg");
        background-repeat: no-repeat;
        object-fit: cover;
      }
    </style>
  </head>
  <body>
    <canvas id = "a"></canvas>
    <script>
      const ctx = document.getElementById("a").getContext("2d");
      const baseY = 135;
      const gameLength = 1000;
      let playerY = 125;
      let playerX = 25;
      let velocityY = 0;
      let score = 0;
      let inAir = false;
      let obstacleX = 80;
      let obstacleX2 = 135;
      let obstacleX3 = 190;
      let obstacleX4 = 240;
      let obstacleX5 = 300;
      let obstacleX6 = 360;
      let gameover = false;
      let textX = 25;
      const garvity = window.setInterval(gravity, 7);
      const interval = window.setInterval(gameloop, 5);
      const runner = window.setInterval(run, 4);
      const checker = window.setInterval(check, 100);
      let clicked = false;
      let current = 0;
      let latest = 0;
      let acelerationfactor = 0.2;
      let speed = 0.4;
      function gameloop() {
        ctx.beginPath();
        ctx.clearRect(0, 0, document.getElementById("a").width, document.getElementById("a").height);
        ctx.moveTo(-10, baseY);
        ctx.strokeStyle = "#000000";
        ctx.lineTo(gameLength, baseY);
        ctx.moveTo(playerX, playerY);
        ctx.lineTo(playerX + 4, playerY);
        ctx.lineTo(playerX + 4, playerY - 4);
        ctx.lineTo(playerX, playerY - 4);
        ctx.lineTo(playerX, playerY);
        ctx.font = "15px monospace";
        ctx.fillText(`Score: ${score}`, textX, 20);
        
        ctx.moveTo(-10, 136);
        ctx.lineTo(1000, 136);
        ctx.moveTo(-10, 136);
        ctx.lineTo(1000, 136);
        
        ctx.moveTo(-10, 137);
        ctx.lineTo(1000, 137);
        ctx.moveTo(-10, 137);
        ctx.lineTo(1000, 137);
        
        ctx.moveTo(-10, 138);
        ctx.lineTo(1000, 138);
        ctx.moveTo(-10, 138);
        ctx.lineTo(1000, 138);
        
        ctx.moveTo(-10, 139);
        ctx.lineTo(1000, 139);
        ctx.moveTo(-10, 139);
        ctx.lineTo(1000, 139);
        
        ctx.moveTo(-10, 140);
        ctx.lineTo(1000, 140);
        ctx.moveTo(-10, 140);
        ctx.lineTo(1000, 140);
        
        ctx.moveTo(-10, 141);
        ctx.lineTo(1000, 141);
        ctx.moveTo(-10, 141);
        ctx.lineTo(1000, 141);
        
        ctx.moveTo(-10, 142);
        ctx.lineTo(1000, 142);
        ctx.moveTo(-10, 142);
        ctx.lineTo(1000, 142);
        
        ctx.moveTo(-10, 143);
        ctx.lineTo(1000, 143);
        ctx.moveTo(-10, 143);
        ctx.lineTo(1000, 143);
        
        ctx.moveTo(-10, 144);
        ctx.lineTo(1000, 144);
        ctx.moveTo(-10, 144);
        ctx.lineTo(1000, 144);
        
        ctx.moveTo(-10, 145);
        ctx.lineTo(1000, 145);
        ctx.moveTo(-10, 145);
        ctx.lineTo(1000, 145);
        
        
        ctx.moveTo(-10, 146);
        ctx.lineTo(1000, 146);
        ctx.moveTo(-10, 146);
        ctx.lineTo(1000, 146);
        
        ctx.moveTo(-10, 147);
        ctx.lineTo(1000, 147);
        ctx.moveTo(-10, 147);
        ctx.lineTo(1000, 147);
        
        ctx.moveTo(-10, 148);
        ctx.lineTo(1000, 148);
        ctx.moveTo(-10, 148);
        ctx.lineTo(1000, 148);
        
        ctx.moveTo(-10, 149);
        ctx.lineTo(1000, 149);
        ctx.moveTo(-10, 149);
        ctx.lineTo(1000, 149);
        
        ctx.moveTo(-10, 150);
        ctx.lineTo(1000, 150);
        ctx.moveTo(-10, 150);
        ctx.lineTo(1000, 150);
        
        ctx.moveTo(obstacleX, 135);
        ctx.lineTo(obstacleX, 120);
        ctx.moveTo(obstacleX, 130);
        ctx.lineTo(obstacleX + 3, 130);
        ctx.lineTo(obstacleX + 3, 122);
        ctx.moveTo(obstacleX, 132);
        ctx.lineTo(obstacleX - 3, 132);
        ctx.lineTo(obstacleX - 3, 126);
        
        ctx.moveTo(obstacleX2, 135);
        ctx.lineTo(obstacleX2, 120);
        ctx.moveTo(obstacleX2, 130);
        ctx.lineTo(obstacleX2 - 3, 130);
        ctx.lineTo(obstacleX2 - 3, 122);
        ctx.moveTo(obstacleX2, 128);
        ctx.lineTo(obstacleX2 + 3, 128);
        ctx.lineTo(obstacleX2 + 3, 124);
        
        ctx.moveTo(obstacleX3, 135);
        ctx.lineTo(obstacleX3, 120);
        ctx.moveTo(obstacleX3, 130);
        ctx.lineTo(obstacleX3 + 3, 130);
        ctx.lineTo(obstacleX3 + 3, 122);
        ctx.moveTo(obstacleX3, 132);
        ctx.lineTo(obstacleX3 - 3, 132);
        ctx.lineTo(obstacleX3 - 3, 126);
        
        ctx.moveTo(obstacleX4, 135);
        ctx.lineTo(obstacleX4, 120);
        ctx.moveTo(obstacleX4, 130);
        ctx.lineTo(obstacleX4 - 3, 130);
        ctx.lineTo(obstacleX4 - 3, 122);
        ctx.moveTo(obstacleX4, 128);
        ctx.lineTo(obstacleX4 + 3, 128);
        ctx.lineTo(obstacleX4 + 3, 124);
        
        ctx.moveTo(obstacleX5, 135);
        ctx.lineTo(obstacleX5, 120);
        ctx.moveTo(obstacleX5, 130);
        ctx.lineTo(obstacleX5 - 3, 130);
        ctx.lineTo(obstacleX5 - 3, 122);
        ctx.moveTo(obstacleX5, 128);
        ctx.lineTo(obstacleX5 + 3, 128);
        ctx.lineTo(obstacleX5 + 3, 124);
        
        ctx.moveTo(obstacleX6, 135);
        ctx.lineTo(obstacleX6, 120);
        ctx.moveTo(obstacleX6, 130);
        ctx.lineTo(obstacleX6 + 3, 130);
        ctx.lineTo(obstacleX6 + 3, 122);
        ctx.moveTo(obstacleX6, 132);
        ctx.lineTo(obstacleX6 - 3, 132);
        ctx.lineTo(obstacleX6 - 3, 126);
        
        ctx.moveTo(-10, baseY);
        ctx.strokeStyle = "#000000";
        ctx.lineTo(gameLength, baseY);
        ctx.moveTo(playerX, playerY);
        ctx.lineTo(playerX + 4, playerY);
        ctx.lineTo(playerX + 4, playerY - 4);
        ctx.lineTo(playerX, playerY - 4);
        ctx.lineTo(playerX, playerY);
        ctx.font = "15px monospace";
        ctx.fillText(`Score: ${score}`, textX, 20);
        ctx.moveTo(obstacleX, 135);
        ctx.lineTo(obstacleX, 120);
        ctx.moveTo(obstacleX, 130);
        ctx.lineTo(obstacleX + 3, 130);
        ctx.lineTo(obstacleX + 3, 122);
        ctx.moveTo(obstacleX, 132);
        ctx.lineTo(obstacleX - 3, 132);
        ctx.lineTo(obstacleX - 3, 126);
        
        ctx.moveTo(obstacleX2, 135);
        ctx.lineTo(obstacleX2, 120);
        ctx.moveTo(obstacleX2, 130);
        ctx.lineTo(obstacleX2 - 3, 130);
        ctx.lineTo(obstacleX2 - 3, 122);
        ctx.moveTo(obstacleX2, 128);
        ctx.lineTo(obstacleX2 + 3, 128);
        ctx.lineTo(obstacleX2 + 3, 124);
        
        ctx.moveTo(obstacleX3, 135);
        ctx.lineTo(obstacleX3, 120);
        ctx.moveTo(obstacleX3, 130);
        ctx.lineTo(obstacleX3 + 3, 130);
        ctx.lineTo(obstacleX3 + 3, 122);
        ctx.moveTo(obstacleX3, 132);
        ctx.lineTo(obstacleX3 - 3, 132);
        ctx.lineTo(obstacleX3 - 3, 126);
        
        ctx.moveTo(obstacleX4, 135);
        ctx.lineTo(obstacleX4, 120);
        ctx.moveTo(obstacleX4, 130);
        ctx.lineTo(obstacleX4 - 3, 130);
        ctx.lineTo(obstacleX4 - 3, 122);
        ctx.moveTo(obstacleX4, 128);
        ctx.lineTo(obstacleX4 + 3, 128);
        ctx.lineTo(obstacleX4 + 3, 124);
        
        ctx.moveTo(obstacleX5, 135);
        ctx.lineTo(obstacleX5, 120);
        ctx.moveTo(obstacleX5, 130);
        ctx.lineTo(obstacleX5 - 3, 130);
        ctx.lineTo(obstacleX5 - 3, 122);
        ctx.moveTo(obstacleX5, 128);
        ctx.lineTo(obstacleX5 + 3, 128);
        ctx.lineTo(obstacleX5 + 3, 124);
        
        ctx.moveTo(obstacleX6, 135);
        ctx.lineTo(obstacleX6, 120);
        ctx.moveTo(obstacleX6, 130);
        ctx.lineTo(obstacleX6 + 3, 130);
        ctx.lineTo(obstacleX6 + 3, 122);
        ctx.moveTo(obstacleX6, 132);
        ctx.lineTo(obstacleX6 - 3, 132);
        ctx.lineTo(obstacleX6 - 3, 126);
        ctx.stroke();
        ctx.closePath();
        
      }
      function run() {
        if (playerY > 133) {
          playerY = 133;
        }
        obstacleX -= speed;
        obstacleX2 -= speed;
        obstacleX3 -= speed;
        obstacleX4 -= speed;
        obstacleX5 -= speed;
        obstacleX6 -= speed;
        if (!gameover) {
          if ((obstacleX + 3) >= (playerX - 4) && (obstacleX - 3) <= (playerX + 4) && playerY > 121) {
            restart();
           }
          if ((obstacleX2 + 3) >= (playerX - 4) && (obstacleX2 - 3) <= (playerX + 4) && playerY > 121) {
            restart();
          }
          if ((obstacleX3 + 3) >= (playerX - 4) && (obstacleX3 - 3) <= (playerX + 4) && playerY > 121) {
            restart();
          }
          if ((obstacleX4 + 3) >= (playerX - 4) && (obstacleX4 - 3) <= (playerX + 4) && playerY > 121) {
            restart();
          }
          if ((obstacleX5 + 3) >= (playerX - 4) && (obstacleX5 - 3) <= (playerX + 4) && playerY > 121) {
            restart();
          }
          if ((obstacleX6 + 3) >= (playerX - 4) && (obstacleX6 - 3) <= (playerX + 4) && playerY > 121) {
            restart();
          }
        }
        if (obstacleX < -4) {
          obstacleX = obstacleX6 + 55;
        }
        if (obstacleX2 < -4) {
          obstacleX2 = obstacleX + 70;
        }
        if (obstacleX3 < -4) {
          obstacleX3 = obstacleX2 + 50;
        }
        if (obstacleX4 < -4) {
          obstacleX4 = obstacleX3 + 60;
        }
        if (obstacleX5 < -4) {
          obstacleX5 = obstacleX4 + 65;
        }
        if (obstacleX6 < -4) {
          obstacleX6 = obstacleX5 + 70;
        }
        
      }
      function gravity() {
        if (playerY < 133) {
          playerY += 0.5;
        }
      }
      function overalert() {
        alert("Game Over, click screen to restart.");
      }
      function restart() {
        
        ctx.lineWidth = 4000;
        gameover = true;
        
        console.error("Skill Issue");
        score = 0;
        obstacleX = 80;
        obstacleX2 = 135;
        obstacleX3 = 190;
        obstacleX4 = 240;
        obstacleX5 = 300;
        obstacleX6 = 360;
        setTimeout(overalert, 100);
      }
      function setAir() {
        inAir = false;
      }
      document.addEventListener('click', (event) => {
        if (gameover) {
          score = 0;
          obstacleX = 80;
          obstacleX2 = 135;
          obstacleX3 = 190;
          obstacleX4 = 240;
          obstacleX5 = 300;
          ctx.lineWidth = 1;
          obstacleX6 = 360;
          gameover = false;
        }
      });
      
      document.addEventListener('keydown', (event) => {
        if (event.key === " " && inAir !== true) {
          inAir = true;
          //\
            playerY -= 40;
          //\
          setTimeout(setAir, 700);
        }
      });
      function check() {
        score += 1;
      }
    </script>
  </body>
</html>
